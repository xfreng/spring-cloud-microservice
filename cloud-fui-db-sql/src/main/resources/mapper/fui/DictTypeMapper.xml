<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fui.cloud.dao.fui.dict.DictTypeMapper">
  <resultMap id="BaseResultMap" type="com.fui.cloud.model.fui.DictType">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="dict_code" jdbcType="VARCHAR" property="dictCode" />
    <result column="dict_desc" jdbcType="VARCHAR" property="dictDesc" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, dict_code, dict_desc
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from fui_dict_type
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from fui_dict_type
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.fui.cloud.model.fui.DictType">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <selectKey keyProperty="id" resultType="int" order="BEFORE">
      select case when max(id) is null then 1 else max(id)+1 end as "id" from fui_dict_type
    </selectKey>
    insert into fui_dict_type (id, dict_code, dict_desc
      )
    values (#{id,jdbcType=INTEGER}, #{dictCode,jdbcType=VARCHAR}, #{dictDesc,jdbcType=VARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.fui.cloud.model.fui.DictType">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into fui_dict_type
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="dictCode != null">
        dict_code,
      </if>
      <if test="dictDesc != null">
        dict_desc,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="dictCode != null">
        #{dictCode,jdbcType=VARCHAR},
      </if>
      <if test="dictDesc != null">
        #{dictDesc,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.fui.cloud.model.fui.DictType">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update fui_dict_type
    <set>
      <if test="dictCode != null">
        dict_code = #{dictCode,jdbcType=VARCHAR},
      </if>
      <if test="dictDesc != null">
        dict_desc = #{dictDesc,jdbcType=VARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.fui.cloud.model.fui.DictType">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update fui_dict_type
    set dict_code = #{dictCode,jdbcType=VARCHAR},
      dict_desc = #{dictDesc,jdbcType=VARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>

    <select id="query" parameterType="java.util.HashMap" resultType="com.fui.cloud.model.fui.DictType">
        SELECT
                id	as "id",
                dict_code as "dictCode",
                dict_desc	as "dictDesc"
        FROM fui_dict_type WHERE 1=1
        <if test="id != null">
            AND id = #{id}
        </if>
        <if test="dict_code != null">
            AND dict_code like '%${dictCode}%'
        </if>
        <if test="dict_desc != null">
            AND dict_desc like '%${dictDesc}%'
        </if>
        <if test="orderBy != null">
            ORDER BY #{orderBy}
        </if>
    </select>
	
	<select id="queryDictForTree" parameterType="java.lang.String" resultType="java.util.HashMap">
		select 
			dict_code AS "id",
			dict_desc AS "text",
			parent_code AS "pid"
		from (
            select t.dict_code, t.dict_desc, '' parent_code
                from fui_dict_type t
            union all
            select t.dict_entry_code, t.dict_entry_desc dict_desc, t.dict_code parent_code
                from fui_dict_entry t
        ) t
		where t.dict_code = #{dictCode,jdbcType=VARCHAR}
		or t.parent_code = #{dictCode,jdbcType=VARCHAR}
	</select>
  
</mapper>